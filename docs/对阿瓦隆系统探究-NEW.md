# 官方文献

- [BILIBILI 12 周年演讲](https://www.bilibili.com/video/BV1CV411s7jd)中的p2章节 16:00-17:24里讲到阿瓦隆系统
- [人身攻击与引战类评论的社区治理（文末抽奖）- 哔哩哔哩技术](https://mp.weixin.qq.com/s/_MTffQhRP8hS451n1S5L1A)
- [B站评论系统架构设计 - 哔哩哔哩技术](https://mp.weixin.qq.com/s/s99ZWuSi0Lu6ivfpBHvLWQ)

# 个人研究

首先科普个小知识，删除评论，一般不是从数据库中删除这条记录，**而是将状态标记为”已删除“**，几乎所有社交网站都是这么做的。即使你删了评论，后台依旧可以看到。

## 屏蔽你的评论

阿瓦隆系统将你的评论屏蔽，少数会发通知说你的评论违规已被移除，然后评论的情况也确实是自己也无法看到了。

而多数的情况还是将你的评论ShadowBan，即仅自己可见，他人账号或游客无法查看。并且这不会通知你，玩的就是欺骗，让你以为评论没什么事，使你不会后续跟进重新发送什么的。（这不是B站与其他国内平台的专利，YouTube也会，只要你的评论特别不正确，就会被同样的方式对待）

还有一种情况是，将你的评论无声无息的删除而不进行通知。这个还是有感知的，即发送后一段时间之后刷新评论区发现你的评论不见了。

当然，它还会秋后算账你的评论，即开始是正常的，你甚至能够收到点赞和回复，一段时间后将你的评论ShadowBan或无声无息的删除。

## 申诉功能

很多人因为自己的评论被阿瓦隆ShadowBan等问题而去对线客服，也确实有效，让客服把评论放出来了。

对此，官方也在2022年末添加了[【社区违规申诉】](https://www.bilibili.com/h5/comment/appeal)功能（联系客服=>社区违规申诉），填写对应的评论区地址并提交后，若评论区里有ShadowBan或者被系统删除等异常状态的评论，申诉提交成功。若此评论区下没有异常状态的评论，提交会提示“无可申诉评论”。

不过，这评论申诉好像也不像人工审的，也有用AI审核的嫌疑，因为它好像不会理解申诉内容。

如果现在你还因为评论仅自己可见这样的问题去对线客服，客服也只会让你去这里了。

### 特性

- 每天有3次审核机会
- 申诉成功再提交申诉，又会提示提交成功，会浪费一次机会。
- 后续有评论审核不通过，再去提交申诉，还是会提交成功，但是……没有后续了。
- 当审核通过后，所有异常评论都转正后，再去申诉就是“无可申诉评论”。

## 审查你的评论

### 评论状态

个人推测，评论至少有4或5种状态（根据可见状态以及是否可申诉）

| 状态                                                         | 自己可见 | 别人可见 | 可申诉 |
| :----------------------------------------------------------- | :------: | :------: | :----: |
| 审核中                                                       |    ✅    |    ❌    |   ❌   |
| 正常                                                         |    ✅    |    ✅    |   ❌   |
| ShadowBan                                                    |    ✅    |    ❌    |   ✅   |
| 正常删除(自己删除/UP主删除)                                    |    ❌    |    ❌    |   ❌   |
| 非正常删除(系统偷偷删/“已被移除”通知/“被举报已被移除”通知) |    ❌    |    ❌    |   ✅   |

### 假想流程图

根据经验推算的流程图。大致是这样的，实际比这更加复杂，甚至我推测可能不准，**仅供参考**！

蓝色方框表示评论审核中状态，其他见名知意。包含敏感词是这个不是状态，因为还没有插入到数据库里。

![评论状态-由draw.io绘制](评论状态.svg)

评论发送请求到达服务器后，首先用顶级敏感词库匹配一下，例如"198964"这种在国内平台十恶不赦的字符串，如果匹配上，不插入数据库，返回“评论包含敏感信息”。如果没有匹配上，则插入数据库，然后返回评论信息（例如评论ID）以及“发送成功”的提示。此刻评论状态处于“审核中”状态，继续进行接下来的审核。

处于审核中状态的评论，仅自己可见，有类似ShadowBan的效果，如果此刻你立即发送申诉请求，是“无可申诉评论”的。

剩下的审核步骤就看图吧，懒得描述了。

人工审核这项是纯纯猜的，因为我有条评论永远处于审核状态（仅自己可见但申诉无评论），开始到一星期后也是那样，盲猜阿瓦隆甩给了人工但是人工不想理。

### 关于评论删除的两个“状态”

发送一个必然会被ShadowBan的评论，然后删除，再去申诉，申诉是没有可申诉评论的，说明评论是正确删除了的。

发送一个必被系统偷偷删除的评论，接着开新的窗口再查看此评论区，好的评论没了，说明已经被系统偷偷删了。然后我回到原来的窗口，评论因为没有刷新页面，还留在那里，然后手动进行删除，得到的响应是删除成功。（补充：用postman等调试工具调用API删除，同个评论ID，即使删除多次还是返回成功。如果填别人的评论ID，响应是访问权限不足。如果填的是不存在的评论ID，响应是成功）。然后跑去申诉，申诉却能提交成功？！

按理来说我删除就应该把状态改成“用户删除”，那么原来“系统删除”的状态会被改变。但事实是，它又能申诉。

有两种可能：

1. 申诉看的还是评论的状态字段，若原来的评论状态是“系统删除”，用户的删除将不会做什么
2. 是否能申诉看的不是状态字段，而是有别的字段来表示是否违规，用户的删除的确将状态改为了已删除

## 评论区戒严

或许这不应该叫“戒严”吧，应该只是阿瓦隆审查的力度不一样罢了。
由于图片审核耗费较大且容易出现误判（宁可错杀也不可放过），现在严管评论区直接关闭了图片评论功能，例如某所有官媒的调查通告，均禁止发送图片。
### 只是开启AI

阿瓦隆通常不用AI审查（例如NLP语言模型），因为这极其的费GPU资源和电力资源，一般评论区用的是例如正则等纯CPU的算法。在某些键政或争议的评论区，才会使用AI，比如up主章北海的部分评论区。

AI的使用会显著拉长评论的审核时间，不像普通算法那样可以在5秒内完成。AI审查平均耗时约为7分钟，理论上最长不会超过10分钟。

相同内容的评论，在其他普通评论区发送后可在5秒内正常显示；但在该评论区，发送评论后等待30秒检查，仅自己可见。尝试提交申诉时，系统提示“无可申诉评论”。随后每隔1分钟检查一次评论状态，若仍为仅自己可见，则再次提交申诉。大约7–8分钟后，评论会变为公开可见。

继续准备一些在普通的评论区能够在5秒内通过的文本，按照上述步骤进行测试，若实验中发现评论被删或者申诉提交成功，下个评论的实验就换一个在这个评论区没发评论的实验账号。最后评论大多数能够正常显示，少数被删除，极少数评论申诉提交成功（认定为ShadowBan状态）。

当然，不是说开启AI，就不用原来的算法了，是先过一下普通算法，不通过的该怎样还是怎样，通过的再让AI来审查一遍。

### 让AI只放支持的?

例如这个视频：[法院回应山西订婚强奸案焦点问题](https://www.bilibili.com/BV1ESoAYxEMQ)，经测试是开启了AI审核的。

在其他评论区秒过的无意义语句，与视频内容不相关且不对视频做一个表示“支持”的回应，下称“无意义评论”

尝试随便发条无意义评论。在发送后等待30秒后，评论状态是别人看不到，然后立即提交申诉，是无评论可申诉，确信是开了AI审核的。

准备一组无意义评论，按照上述方法进行测试，最终评论的状态几乎都是被删除，裁决的时间7-8分这样。当我把评论内容换成了表示支持视频的内容，评论在一定时间之后就通过了，即状态正常，别人可见。不过，即使这样还是有大的**概率**最后还是被删的，哪怕你是复制的这个评论区已经发出来的支持向的评论，所以我保留一个“?”。不过，表示支持的评论和无意义评论，前者最后通过的概率是比后者要大得很多很多。

### 评论发送后直接shadowban

无论评论内容是什么，直接shadowban，后续审核有时间就随机找几个顺眼的放出来（或者评论发布者去申诉了）。例如[品客(薯片)官方账号](https://space.bilibili.com/1132319449)的评论区（回答一下这为什么给戒严了：不是因为“品客=Pink=小粉红”，而是b站内部无孩爱猫女的杰作。不懂可搜：圆头耄耋）。症状：发什么评论都是ShadowBan，要去申诉一下才能显示。

### 评论发送后直接删除

无论评论内容是什么，直接系统删除。症状：无论发什么评论，刷新评论区都秒没，要去申诉一下才能显示。

### 人工审核（可能有吧）

【纯属猜测】发送后还是经过普通算法审核，然后通过的由人工审核，严重性最高的评论区才会用，例如视频踩了大雷但是作者不知道引申含义的那种视频，评论处于审核状态的时间最长（大于AI的最长10分钟）。

不要忘了，人力资源是这些大型网站最不愿意出的。

……

------

上面也只能是猜测

hmm，这种评论区，换“隐藏分”低点的账号就是直接删除了。

或者【评论发送后直接删除】和【人工审核】实际是同一个东西，因为我那“隐藏分”高的账号还未遇到“无论评论内容是什么，发送后直接删除”的情况。又因为不愿出人力，所以“隐藏分”低的账号发的直接删了算了，“隐藏分”高的才让人审审。

是的，的确是有这么一个评论区（为保护隐私不放链接），用我认为“隐藏分”高的账号发送无意义评论，评论处于审核状态的时间都超过了1小时，我不想等下去以及打扰到审核，还是主动把评论删了。如果用“隐藏分”低的账号发，无论什么都是秒删，再使用别的评论区无论账号是什么都ShadowBan的评论文本发送，在这里就是秒删而不是ShadowBan了。

PS：“隐藏分”来自网友的论述，不是我总结出来的。

# 其他杂项研究

## 评论区拉黑特定账号【研究于 2023-05-09】

当你发了某个评论，不但评论会被shadowban，而且你的账号再到该评论区随便发啥评论都会被系统秒删。你会以为评论区被戒严了，但是用小号去随便发条评论，竟然可以正常显示！说明评论区并没有被戒严，但是主账号于这评论区来说就是被戒严了。这种情况，可以说是你的账号被这个评论区拉黑了。

## 敏感词分情况讨论【研究于 2024-03-06】

- 敏感词分评论区讨论
  - 当在某评论区ShadowBan时
    - 其他非自己的评论区正常，自己评论区正常（这是被某评论区查重黑名单/反刷屏）
    - 其他非自己的评论区ShadowBan，自己评论区ShadowBan（全站ShadowBan）
    - 其他非自己的评论区ShadowBan，自己评论区正常（UP主特例）
  - 当你在两个未戒严的评论区发评论
    - 不一定键政的评论区，比如原神官号，“64GB内存”：shadowban/删除
    - 平平无常的视频评论区，“64GB内存”：正常
- 敏感词分账号讨论
  - 正常评论区，1-3级号，“我的世界里的一组”：shadowban/删除
  - 正常评论区，4?-5-6级号：我的世界里的一组”：疑似没问题（申诉提示无可申诉评论，这种情况一般一段时间后正常显示）
  - ~~大会员特权~~ (没试过，有阿瓦隆这BYD我给他开会员?!)

*声明：敏感词库会不断变化，以上测试词随时失效，比如万恶之源“唯唯诺诺，重拳出击”不再ShadowBan*

## 阿瓦隆联系上下文的特定敏感词【研究于2024-04】

![](胡桃被架走.webp)

请欣赏这张图🥰

那么，让我们来做个实验吧！

发送评论，关键词：“架走”

**实验结果（我与其他用户结果一致）：**

- 由普通用户发布，关于“胡桃”的视频（指标题、TAG、简介包含胡桃一词）：shadowban/秒删
- 原神官方的胡桃演示视频：shadowban/秒删
- 原神的其他角色演示视频：正常
- 发过胡桃相关视频的普通用户，但是他的其他原神视频：正常

**这证明阿瓦隆会联系上下文设置特定敏感词等**

## 账号被内容或TAG戒严【研究于2024-09-18】

有一个账号，在原神相关的**视频**下，发送任何评论都被系统删除，没遭到shadowBan而是直接删。用其他账号测试，评论区未戒严。

对此进行假设与测试

>  它如何判断视频内容是否是原神的？可能性如下：视频标题与简介、视频标签、视频字幕、视频画面

- 视频标签、标题、画面里有原神：秒删

- 视频标签没有，标题、画面有原神：靠！没有这种视频:(

所以找另一个账号手动上传符合要求的视频

随便上传一个原神的游戏录像，文件名懒得改了，就是原来的名字`${日期}.mp4`。好家伙，进度条才刚刚跑，我还没有输入标题（仅自动填写了上传的文件名）呢，视频标签就自动生成了【原神】【二次元】【手机游戏】【RPG】……

忽略它推荐标签，标题保留原本文件的日期标题不改，但是TAG设置为无关的【游戏】【日常】【手机】，简介留空

继续用问题账号进行测试，结果是：秒删

>  看来是基于AI画面识别的，那么它是否还依赖视频标签？

- 上传一个非游戏画面，而是录屏浏览b站原神相关图文、评论区，甚至去原神官网浏览，视频画面中有"原神"之类的文本内容，以及原神相关游戏画面静态图片。标题为日期。上传后标签里没有出现【原神】，而是出现了【学习】等不相关标签。发布后问题账号发布评论：**正常！**
- 上传一个前面一半时间为和平精英游戏录屏，后面一半的时间为原神游戏录屏组合而成的视频。标题为日期。上传直至完毕，标签里只出现了【和平精英】等仅与和平精英相关的标签，并没有出现【原神】之类的。发布后问题账号发布评论：**正常！**
- 上传一个完全为和平精英的游戏录屏视频，标题为日期，但是自行设置标签为【原神】【二次元】【手机游戏】。发布后问题账号发布评论：**正常！**

> 疑似依赖视频标签，但不以UP主自行设置的标签为准；或许出于节省服务器资源考虑，仅识别前几秒的画面作为生成标签依据

> 如果是原神的动态而非视频，还会被秒删吗？

- 原神相关动态，非原神官方发布：正常
- 原神相关动态，原神官方发布：正常
- 原神相关动态，有“#原神#”标签：秒删
- 叫朋友发送动态，内容：`HelloWorld #原神#`，发布后`#原神#`标签亮蓝：秒删

> 动态没有标签的概念，大概率依赖的是AI生成标签。除动态为手动标签
>
> 但不排除它并不是依赖标签而是依赖自己的一套体系的可能
